.PHONY: test bench deps lint coverage docs clean help

all: test lint

test:
	@echo "Running tests..."
	@go test -v ./...

bench:
	@echo "Running benchmarks..."
	@go test -bench=. -benchmem ./...

deps:
	@echo "Downloading dependencies..."
	@go mod download
	@go mod tidy

lint:
	@echo "Running linters..."
	@golangci-lint run ./...

coverage:
	@echo "Generating coverage report..."
	@go test -coverprofile=coverage.out ./...
	@go tool cover -html=coverage.out -o coverage.html
	@echo "Coverage report generated: coverage.html"

docs:
	@echo "Generating documentation..."
	@godoc -http=:6060
	@echo "Documentation server running at http://localhost:6060"

clean:
	@echo "Cleaning..."
	@go clean
	@rm -f coverage.out coverage.html

help:
	@echo "Available targets:"
	@echo "  test     - Run tests"
	@echo "  bench    - Run benchmarks"
	@echo "  deps     - Download and tidy dependencies"
	@echo "  lint     - Run linters"
	@echo "  coverage - Generate test coverage report"
	@echo "  docs     - Start documentation server"
	@echo "  clean    - Remove generated files"
	@echo "  help     - Show this help message"
